<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SetupRate</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;min-height:100vh
}
header{text-align:center;padding:40px}
header h1{
  font-size:3rem;
  background:linear-gradient(90deg,#00f5ff,#7cffcb);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent
}
header p{opacity:.8}

.panel{
  max-width:520px;margin:20px auto;
  background:rgba(255,255,255,.1);
  padding:20px;border-radius:20px;
  backdrop-filter:blur(15px)
}
.panel input,.panel textarea{
  width:100%;padding:10px;margin-bottom:10px;
  border:none;border-radius:10px;
  background:rgba(255,255,255,.15);color:#fff
}
.panel textarea{resize:none;height:70px}

.panel button{
  width:100%;padding:12px;border:none;
  border-radius:12px;background:#00f5ff;
  color:#000;font-weight:bold;cursor:pointer
}

.limit{text-align:center;font-size:.85rem;opacity:.8}

.setups{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:25px;padding:30px
}
.card{
  background:rgba(255,255,255,.1);
  border-radius:20px;overflow:hidden;
  animation:pop .5s ease
}
.card img{width:100%;height:220px;object-fit:cover}
.content{padding:15px}
.user{font-weight:bold}
.desc{font-size:.9rem;opacity:.85;margin:6px 0}

.stars span{font-size:22px;cursor:pointer;color:#555}
.stars span.active{color:gold}
.info{font-size:.85rem;margin-top:5px}

.comment input{
  width:100%;margin-top:8px;
  padding:8px;border-radius:10px;border:none;
  background:rgba(255,255,255,.15);color:#fff
}
.comments{font-size:.8rem;margin-top:5px;max-height:70px;overflow:auto}

/* ===== CAMERA ===== */
#cameraBox{display:none;text-align:center}
video,canvas{
  width:100%;border-radius:15px;margin-bottom:10px
}

/* ===== CHAT SUPPORT ===== */
#chat{
  position:fixed;bottom:20px;right:20px;
  width:260px;background:#111;
  border-radius:15px;overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,.6)
}
#chat header{
  padding:10px;font-size:.9rem;
  background:#00f5ff;color:#000;text-align:center
}
#chat .msgs{
  height:180px;padding:10px;
  overflow:auto;font-size:.8rem
}
#chat .msgs div{margin-bottom:6px}
#chat input{
  width:100%;border:none;padding:8px;
  outline:none;font-size:.8rem
}

footer{
  text-align:center;font-size:.75rem;
  opacity:.6;padding:15px
}

@keyframes pop{
  from{opacity:0;transform:scale(.9)}
  to{opacity:1;transform:scale(1)}
}
</style>
</head>

<body>

<header>
  <h1>SetupRate</h1>
  <p>Setup'Ä±nÄ± paylaÅŸ â€¢ Puan al â€¢ GeliÅŸtir</p>
</header>

<div class="panel">
  <input id="username" placeholder="KullanÄ±cÄ± adÄ±">
  <textarea id="desc" placeholder="Setup aÃ§Ä±klamasÄ±"></textarea>

  <button onclick="openCamera()">ðŸ“· Kamerayla Ã‡ek</button>
  <input type="file" id="file" accept="image/*">

  <button onclick="addSetup()">Setup'Ä± PaylaÅŸ</button>
  <div class="limit" id="limitText"></div>

  <div id="cameraBox">
    <video id="video" autoplay></video>
    <button onclick="takePhoto()">FotoÄŸraf Ã‡ek</button>
    <canvas id="canvas"></canvas>
  </div>
</div>

<section class="setups" id="setups"></section>

<footer>
  Gizlilik PolitikasÄ±: Ä°Ã§erikler tarayÄ±cÄ±da saklanÄ±r. KiÅŸisel veriler
  Ã¼Ã§Ã¼ncÃ¼ kiÅŸilerle paylaÅŸÄ±lmaz. Demo amaÃ§lÄ± bir projedir.
</footer>

<!-- ===== CANLI DESTEK ===== -->
<div id="chat">
  <header>CanlÄ± Destek</header>
  <div class="msgs" id="msgs">
    <div><b>Destek:</b> Merhaba! Setup iÃ§in ne eklenebilir?</div>
  </div>
  <input id="chatInput" placeholder="Mesaj yaz...">
</div>

<script>
/* ===== LIMIT ===== */
const limitText=document.getElementById("limitText");
const today=()=>new Date().toLocaleDateString();
const getCount=()=>JSON.parse(localStorage.getItem("limit")||"{}")[today()]||0;
const setCount=()=>{
  const d=JSON.parse(localStorage.getItem("limit")||"{}");
  d[today()]=getCount()+1;
  localStorage.setItem("limit",JSON.stringify(d));
};
const updateLimit=()=>limitText.textContent=`BugÃ¼n ${3-getCount()} setup hakkÄ±n kaldÄ±`;
updateLimit();

/* ===== CAMERA ===== */
let cameraImage=null;
async function openCamera(){
  const box=document.getElementById("cameraBox");
  box.style.display="block";
  const stream=await navigator.mediaDevices.getUserMedia({video:true});
  video.srcObject=stream;
}
function takePhoto(){
  canvas.width=video.videoWidth;
  canvas.height=video.videoHeight;
  canvas.getContext("2d").drawImage(video,0,0);
  cameraImage=canvas.toDataURL("image/png");
  alert("FotoÄŸraf Ã§ekildi!");
}

/* ===== ADD SETUP ===== */
function addSetup(){
  if(getCount()>=3){alert("GÃ¼nde max 3 setup!");return;}
  const u=username.value.trim();
  const d=desc.value.trim();
  const f=file.files[0];
  if(!u||!d||(!f&&!cameraImage))return;

  const reader=new FileReader();
  reader.onload=()=>{
    createCard(u,d,reader.result);
    setCount();updateLimit();
  };
  if(f) reader.readAsDataURL(f);
  else createCard(u,d,cameraImage);
}

function createCard(u,d,img){
  const card=document.createElement("div");
  card.className="card";
  let rates=[];
  card.innerHTML=`
    <img src="${img}">
    <div class="content">
      <div class="user">@${u}</div>
      <div class="desc">${d}</div>
      <div class="stars">
        ${[1,2,3,4,5].map(n=>`<span data="${n}">â˜…</span>`).join("")}
      </div>
      <div class="info">HenÃ¼z puan yok</div>
      <div class="comment">
        <input placeholder="Yorum yaz">
        <div class="comments"></div>
      </div>
    </div>`;
  const stars=card.querySelectorAll(".stars span");
  const info=card.querySelector(".info");
  stars.forEach(s=>s.onclick=()=>{
    const v=+s.dataset;
    rates.push(v);
    stars.forEach(x=>x.classList.toggle("active",+x.dataset<=v));
    info.textContent=`â­ Ortalama ${(rates.reduce((a,b)=>a+b,0)/rates.length).toFixed(1)}`;
  });
  setups.prepend(card);
}

/* ===== CHATBOT ===== */
const msgs=document.getElementById("msgs");
chatInput.onkeypress=e=>{
  if(e.key==="Enter"&&chatInput.value){
    const text=chatInput.value.toLowerCase();
    msgs.innerHTML+=`<div><b>Sen:</b> ${chatInput.value}</div>`;
    let reply="Bunu AnlayamadÄ±m LÃ¼tfen DÃ¼zgÃ¼n Åžekilde YazÄ±nÄ±z";

    if(text.includes("setup")||text.includes("ekle")){
      reply="RGB Ä±ÅŸÄ±k, masa Ã¼stÃ¼ dÃ¼zeni, mousepad, monitÃ¶r kolu ve kablo dÃ¼zenleme ekleyebilirsin.";
    }else if(text.includes("gaming")){
      reply="144Hz monitÃ¶r, mekanik klavye ve kaliteli kulaklÄ±k gaming setup iÃ§in Ã§ok iyi olur.";
    }else if(text.includes("ders")){
      reply="Minimal masa, gÃ¶z yormayan Ä±ÅŸÄ±k ve laptop standÄ± ders iÃ§in ideal.";
    }

    msgs.innerHTML+=`<div><b>Destek:</b> ${reply}</div>`;
    msgs.scrollTop=msgs.scrollHeight;
    chatInput.value="";
  }
};
</script>

</body>
</html>

