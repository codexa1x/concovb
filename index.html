<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SetupRate</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,sans-serif}
body{
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;min-height:100vh;
}

/* ===== HEADER ===== */
header{text-align:center;padding:30px}
header h1{
  font-size:3rem;
  background:linear-gradient(90deg,#00f5ff,#7cffcb);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
header p{opacity:.8}

/* ===== PANEL ===== */
.panel{
  max-width:520px;margin:20px auto;
  background:rgba(255,255,255,.1);
  padding:20px;border-radius:20px;
}
.panel input,.panel textarea{
  width:100%;padding:10px;margin-bottom:10px;
  border:none;border-radius:10px;
  background:rgba(255,255,255,.15);color:#fff
}
.panel textarea{resize:none;height:70px}
.panel button{
  width:100%;padding:12px;border:none;
  border-radius:12px;background:#00f5ff;
  color:#000;font-weight:bold;cursor:pointer
}
.limit{text-align:center;font-size:.85rem;opacity:.8}

/* ===== SECTIONS ===== */
.section-title{
  padding:10px 30px;
  font-weight:bold;
  opacity:.9;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;padding:20px 30px;
}

.card{
  background:rgba(255,255,255,.12);
  border-radius:18px;overflow:hidden;
  animation:pop .4s ease;
}
.card img{width:100%;height:200px;object-fit:cover}
.content{padding:12px}
.user{font-weight:bold}
.desc{font-size:.85rem;opacity:.8;margin:5px 0}

.stars span{
  font-size:20px;cursor:pointer;color:#555
}
.stars span.active{color:gold}

.info{font-size:.8rem;margin-top:5px}

/* ===== PAGINATION ===== */
.pagination{
  text-align:center;padding:15px
}
.pagination span{
  display:inline-block;
  margin:0 5px;
  padding:6px 12px;
  border-radius:8px;
  background:rgba(255,255,255,.15);
  cursor:pointer;
}
.pagination span.active{
  background:#00f5ff;
  color:#000;
}

/* ===== ANIM ===== */
@keyframes pop{
  from{opacity:0;transform:scale(.9)}
  to{opacity:1;transform:scale(1)}
}
</style>
</head>

<body>

<header>
  <h1>SetupRate</h1>
  <p>Setup payla≈ü ‚Ä¢ Puan al ‚Ä¢ Geli≈ütir</p>
</header>

<!-- ===== UPLOAD PANEL ===== -->
<div class="panel">
  <input id="username" placeholder="Kullanƒ±cƒ± adƒ±">
  <textarea id="desc" placeholder="Setup a√ßƒ±klamasƒ±"></textarea>
  <input type="file" id="file" accept="image/*">
  <button onclick="addSetup()">Setup'ƒ± Payla≈ü</button>
  <div class="limit" id="limitText"></div>
</div>

<!-- ===== MY SETUPS ===== -->
<div class="section-title">üë§ Benim Setuplarƒ±m</div>
<div class="grid" id="mySetups"></div>

<!-- ===== ALL SETUPS ===== -->
<div class="section-title">üåç T√ºm Setuplar</div>
<div class="grid" id="allSetups"></div>

<!-- ===== PAGINATION ===== -->
<div class="pagination" id="pagination"></div>

<script>
/* ===== LIMIT ===== */
const today=()=>new Date().toLocaleDateString();
const getCount=()=>JSON.parse(localStorage.getItem("limit")||"{}")[today()]||0;
const setCount=()=>{
  const d=JSON.parse(localStorage.getItem("limit")||"{}");
  d[today()]=getCount()+1;
  localStorage.setItem("limit",JSON.stringify(d));
};
const limitText=document.getElementById("limitText");
const updateLimit=()=>limitText.textContent=`Bug√ºn ${3-getCount()} setup hakkƒ±n kaldƒ±`;
updateLimit();

/* ===== DATA ===== */
let setupsData = JSON.parse(localStorage.getItem("setupsData")||"[]");
const PER_PAGE = 5;
let currentPage = 1;

/* ===== ADD SETUP ===== */
function addSetup(){
  if(getCount()>=3){alert("G√ºnde max 3 setup!");return;}

  const u=username.value.trim();
  const d=desc.value.trim();
  const f=file.files[0];
  if(!u||!d||!f)return;

  const reader=new FileReader();
  reader.onload=()=>{
    setupsData.unshift({
      user:u,
      desc:d,
      img:reader.result,
      rates:[]
    });
    localStorage.setItem("setupsData",JSON.stringify(setupsData));
    setCount();updateLimit();
    render();
  };
  reader.readAsDataURL(f);
}

/* ===== RENDER ===== */
function render(){
  renderMySetups();
  renderAllSetups();
  renderPagination();
}

/* ===== MY SETUPS ===== */
function renderMySetups(){
  mySetups.innerHTML="";
  const myName=username.value.trim();
  setupsData.filter(s=>s.user===myName).forEach(s=>{
    mySetups.appendChild(createCard(s,false));
  });
}

/* ===== ALL SETUPS + PAGINATION ===== */
function renderAllSetups(){
  allSetups.innerHTML="";
  const start=(currentPage-1)*PER_PAGE;
  const pageData=setupsData.slice(start,start+PER_PAGE);
  pageData.forEach(s=>{
    allSetups.appendChild(createCard(s,true));
  });
}

/* ===== PAGINATION ===== */
function renderPagination(){
  pagination.innerHTML="";
  const pages=Math.ceil(setupsData.length/PER_PAGE);
  for(let i=1;i<=pages;i++){
    const span=document.createElement("span");
    span.textContent=i;
    if(i===currentPage) span.classList.add("active");
    span.onclick=()=>{currentPage=i;render();}
    pagination.appendChild(span);
  }
}

/* ===== CARD ===== */
function createCard(data,rateable){
  const card=document.createElement("div");
  card.className="card";

  card.innerHTML=`
    <img src="${data.img}">
    <div class="content">
      <div class="user">@${data.user}</div>
      <div class="desc">${data.desc}</div>
      <div class="stars">
        ${[1,2,3,4,5].map(n=>`<span data="${n}">‚òÖ</span>`).join("")}
      </div>
      <div class="info"></div>
    </div>
  `;

  const stars=card.querySelectorAll(".stars span");
  const info=card.querySelector(".info");

  const avg = data.rates.length
    ? (data.rates.reduce((a,b)=>a+b,0)/data.rates.length).toFixed(1)
    : null;

  info.textContent = avg ? `‚≠ê Ortalama: ${avg} (${data.rates.length})` : "Hen√ºz puan yok";

  if(rateable){
    stars.forEach(s=>{
      s.onclick=()=>{
        const v=+s.dataset;
        data.rates.push(v);
        localStorage.setItem("setupsData",JSON.stringify(setupsData));
        render();
      }
    });
  }

  return card;
}

/* ===== INIT ===== */
render();
</script>

</body>
</html>

