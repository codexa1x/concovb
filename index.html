<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>SetupRate â€“ FIXED FINAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:#0f0f14;color:#fff}
header{text-align:center;padding:20px;font-size:26px;font-weight:800}
.container{max-width:1000px;margin:auto;padding:20px}
.card{background:#1c1c26;border-radius:16px;padding:16px;margin-bottom:20px;animation:fade .4s ease}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
img{width:100%;border-radius:12px}
input,textarea,button{width:100%;padding:10px;margin-top:8px;border-radius:10px;border:none}
button{background:#6c5ce7;color:#fff;font-weight:600;cursor:pointer}
.rating span{font-size:22px;cursor:pointer}
.comment{font-size:14px;opacity:.85}
</style>
</head>
<body>
<header>ğŸ”¥ SetupRate ğŸ”¥</header>

<div class="container">
<div class="card">
<h3>ğŸ“¸ Setup PaylaÅŸ</h3>
<input id="user" placeholder="Ä°smin" />
<input id="title" placeholder="Setup adÄ± (raax setup)" />
<input id="file" type="file" accept="image/*" />
<button onclick="upload()">PaylaÅŸ</button>
</div>

<div id="list"></div>
</div>

<script>
// ğŸ”´ BURAYI DOLDURMADAN Ã‡ALIÅMAZ
const firebaseConfig={
 apiKey:"API_KEY",
 authDomain:"PROJECT.firebaseapp.com",
 projectId:"PROJECT_ID",
 storageBucket:"PROJECT.appspot.com",
 appId:"APP_ID"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const storage=firebase.storage();

async function upload(){
 const u=user.value,t=title.value,f=file.files[0];
 if(!u||!t||!f){alert('Hepsi zorunlu');return}
 const ref=storage.ref('setups/'+Date.now());
 await ref.put(f);
 const url=await ref.getDownloadURL();
 await db.collection('setups').add({
  user:u,title:t,img:url,ratings:[],comments:[],time:Date.now()
 });
 user.value=title.value='';file.value='';
}

function rate(id,val){
 db.collection('setups').doc(id)
 .update({ratings:firebase.firestore.FieldValue.arrayUnion(val)});
}

function comment(id,input){
 if(!input.value)return;
 db.collection('setups').doc(id)
 .update({comments:firebase.firestore.FieldValue.arrayUnion(input.value)});
 input.value='';
}

 db.collection('setups').orderBy('time','desc').onSnapshot(snap=>{
 list.innerHTML='';
 snap.forEach(d=>{
  const s=d.data();
  const avg=s.ratings.length?(s.ratings.reduce((a,b)=>a+b)/s.ratings.length).toFixed(1):'â€”';
  list.innerHTML+=`
  <div class="card">
   <b>${s.title}</b> â€¢ ${s.user}<br><br>
   <img src="${s.img}" />
   <div>â­ ${avg}</div>
   <div class="rating">${[1,2,3,4,5].map(n=>`<span onclick=\"rate('${d.id}',${n})\">â­</span>`).join('')}</div>
   <input placeholder="Yorum yaz" onkeydown="if(event.key==='Enter')comment('${d.id}',this)" />
   ${s.comments.map(c=>`<div class='comment'>ğŸ’¬ ${c}</div>`).join('')}
  </div>`;
 });
});
</script>
</body>
</html>



