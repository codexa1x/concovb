<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SetupRate â€“ Tam Ã‡alÄ±ÅŸan HTML</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#0f0f14;color:#fff}
header{padding:20px;text-align:center;font-size:24px;font-weight:800}
.container{max-width:900px;margin:auto;padding:16px}
.card{background:#1c1c26;border-radius:14px;padding:14px;margin-bottom:16px;animation:fade .3s ease}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1}}
img{width:100%;border-radius:10px;margin-top:10px}
input,button{width:100%;padding:10px;margin-top:8px;border-radius:10px;border:none}
button{background:#6c5ce7;color:#fff;font-weight:700;cursor:pointer}
button:hover{background:#8176ff}
.rating span{font-size:22px;cursor:pointer}
.comment{font-size:14px;opacity:.85;margin-top:4px}
.small{font-size:12px;opacity:.6}
</style>
</head>
<body>

<header>ğŸ”¥ SetupRate ğŸ”¥</header>

<div class="container">

<div class="card">
<h3>ğŸ“¸ Setup PaylaÅŸ</h3>
<input id="user" placeholder="Ä°smin">
<input id="title" placeholder="Setup adÄ± (Ã¶rn: raax setup)">
<input id="file" type="file" accept="image/*">
<button onclick="addSetup()">PaylaÅŸ</button>
<div class="small">Bu sÃ¼rÃ¼m %100 HTML + JS. Yenileyince silinmez.</div>
</div>

<div id="list"></div>

</div>

<script>
// === LOCAL STORAGE ===
const KEY = 'setuprate_data';
let setups = JSON.parse(localStorage.getItem(KEY) || '[]');

function save(){
  localStorage.setItem(KEY, JSON.stringify(setups));
}

function addSetup(){
  const u = user.value.trim();
  const t = title.value.trim();
  const f = file.files[0];
  if(!u || !t || !f){
    alert('Ä°sim, setup adÄ± ve foto zorunlu');
    return;
  }
  const reader = new FileReader();
  reader.onload = () => {
    setups.unshift({
      id: Date.now(),
      user: u,
      title: t,
      img: reader.result,
      ratings: [],
      comments: []
    });
    save();
    user.value = title.value = file.value = '';
    render();
  };
  reader.readAsDataURL(f);
}

function rate(id, val){
  const s = setups.find(x => x.id === id);
  if(!s) return;
  s.ratings.push(val);
  save();
  render();
}

function addComment(id, input){
  if(!input.value.trim()) return;
  const s = setups.find(x => x.id === id);
  if(!s) return;
  s.comments.push(input.value.trim());
  input.value = '';
  save();
  render();
}

function avg(arr){
  return arr.length ? (arr.reduce((a,b)=>a+b,0)/arr.length).toFixed(1) : 'â€”';
}

function render(){
  list.innerHTML = '';
  setups.forEach(s => {
    list.innerHTML += `
      <div class="card">
        <b>${s.title}</b> â€¢ ${s.user}<br>
        <img src="${s.img}">
        <div>â­ Ortalama: ${avg(s.ratings)}</div>
        <div class="rating">
          ${[1,2,3,4,5].map(n=>`<span onclick=\"rate(${s.id},${n})\">â­</span>`).join('')}
        </div>
        <input placeholder="Yorum yaz (Enter)" onkeydown="if(event.key==='Enter')addComment(${s.id},this)">
        ${s.comments.map(c=>`<div class='comment'>ğŸ’¬ ${c}</div>`).join('')}
      </div>`;
  });
}

render();
</script>

</body>
</html>

