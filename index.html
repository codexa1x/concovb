<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SetupRate Core</title>

<style>
*{box-sizing:border-box;font-family:Segoe UI;margin:0;padding:0}
body{
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;min-height:100vh
}
header{text-align:center;padding:30px}
header h1{
  font-size:3rem;
  background:linear-gradient(90deg,#00f5ff,#7cffcb);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.panel{
  max-width:500px;margin:20px auto;
  background:rgba(255,255,255,.1);
  padding:20px;border-radius:20px;
  animation:fadeDown .6s ease;
}
.panel input,.panel textarea{
  width:100%;margin-bottom:10px;
  padding:10px;border-radius:10px;
  border:none;background:rgba(255,255,255,.15);
  color:#fff
}
button{
  width:100%;padding:10px;
  border:none;border-radius:12px;
  background:#00f5ff;color:#000;
  font-weight:bold;cursor:pointer
}
.setups{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;padding:30px
}
.card{
  background:rgba(255,255,255,.12);
  border-radius:20px;
  overflow:hidden;
  cursor:pointer;
  animation:fadeUp .5s ease;
}
.card img{width:100%;height:200px;object-fit:cover}
.content{padding:12px}
.badge{
  background:gold;color:#000;
  padding:2px 6px;
  border-radius:6px;
  font-size:.7rem
}
.stars span{
  font-size:20px;cursor:pointer;color:#555
}
.stars span.active{color:gold}

#modal{
  position:fixed;inset:0;
  background:rgba(0,0,0,.7);
  display:none;align-items:center;justify-content:center
}
.modal-box{
  background:#111;padding:20px;
  border-radius:20px;
  width:90%;max-width:420px;
  animation:pop .3s ease
}

@keyframes fadeDown{from{opacity:0;transform:translateY(-20px)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}}
@keyframes pop{from{transform:scale(.85);opacity:0}}
</style>
</head>

<body>

<header>
  <h1>SetupRate</h1>
  <p>√áalƒ±≈üan √ßekirdek sistem</p>
</header>

<div class="panel">
  <input id="user" placeholder="Kullanƒ±cƒ± adƒ±">
  <textarea id="desc" placeholder="Setup a√ßƒ±klamasƒ±"></textarea>
  <input type="file" id="file" accept="image/*">
  <button onclick="addSetup()">Setup Payla≈ü</button>
</div>

<h2 style="text-align:center">üåç Topluluk</h2>
<section class="setups" id="world"></section>

<h2 style="text-align:center">üë§ Benim Setuplarƒ±m</h2>
<section class="setups" id="mine"></section>

<div id="modal" onclick="closeModal()">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div id="modalContent"></div>
    <button onclick="closeModal()">Kapat</button>
  </div>
</div>

<script>
const world=document.getElementById("world");
const mine=document.getElementById("mine");
const modal=document.getElementById("modal");
const modalContent=document.getElementById("modalContent");

let setups=[]; // TEK KAYNAK (EN √ñNEMLƒ∞ NOKTA)

function addSetup(){
  const u=user.value.trim();
  const d=desc.value.trim();
  const f=file.files[0];
  if(!u||!d||!f) return alert("Bo≈ü bƒ±rakma");

  const r=new FileReader();
  r.onload=()=>{
    setups.unshift({
      id:Date.now(),
      user:u,
      desc:d,
      img:r.result,
      ratings:[]
    });
    render();
  };
  r.readAsDataURL(f);
}

function render(){
  world.innerHTML="";
  mine.innerHTML="";
  setups.forEach(s=>{
    const c=createCard(s,false);
    const m=createCard(s,true);
    world.appendChild(c);
    mine.appendChild(m);
  });
}

function createCard(s,isMine){
  const c=document.createElement("div");
  c.className="card";
  c.innerHTML=`
    <img src="${s.img}">
    <div class="content">
      <b>@${s.user}</b>
      ${isMine?'<span class="badge">Benim</span>':""}
      <p style="font-size:.85rem">${s.desc}</p>
      <div class="stars">
        ${[1,2,3,4,5].map(n=>`<span data="${n}">‚òÖ</span>`).join("")}
      </div>
      <div style="font-size:.8rem">
        ${s.ratings.length
          ? "‚≠ê "+avg(s.ratings)
          : "Hen√ºz puan yok"}
      </div>
    </div>`;
  c.onclick=()=>openModal(s);
  c.querySelectorAll("span").forEach(st=>{
    st.onclick=e=>{
      e.stopPropagation();
      s.ratings.push(+st.dataset);
      render();
    };
  });
  return c;
}

function avg(a){
  return (a.reduce((x,y)=>x+y,0)/a.length).toFixed(1);
}

function openModal(s){
  modal.style.display="flex";
  modalContent.innerHTML=`
    <img src="${s.img}" style="width:100%;border-radius:12px">
    <p>${s.desc}</p>
    <p><b>Ortalama:</b> ${s.ratings.length?avg(s.ratings):"Yok"}</p>
  `;
}
function closeModal(){modal.style.display="none"}
</script>

</body>
</html>


